# fn-10 TUI multi-tool parser adapters

## Overview
Abstract log parsing to support different AI coding tools beyond Claude. Each tool (Claude, Codex, OpenCode, etc.) outputs different stream/log formats - need adapter/strategy pattern in presentation layer to normalize to common `LogEntry` type.

## Scope
- Parser adapter interface in `flow-next-tui/src/lib/`
- Claude adapter (current implementation, refactored)
- Codex adapter stub (for future)
- OpenCode adapter stub (for future)
- Auto-detection of format from log content

## Approach
Strategy pattern:
```typescript
interface LogParser {
  canParse(line: string): boolean;  // detect format
  parse(line: string): LogEntry[];
}

// Implementations
class ClaudeStreamJsonParser implements LogParser { ... }
class CodexLogParser implements LogParser { ... }
class OpenCodeLogParser implements LogParser { ... }
```

## Quick commands
- `cd flow-next-tui && bun test parser`

## Acceptance
- [ ] Parser interface extracted
- [ ] Claude parser refactored to adapter
- [ ] Format auto-detection works
- [ ] At least one alternative tool stub

## References
- Current parser: `flow-next-tui/src/lib/parser.ts`
- Claude format: `type: "assistant"` with `message.content[]` blocks
- watch-filter.py shows Claude format handling
